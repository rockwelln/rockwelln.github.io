<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Docker Basics - 1337</title><meta name=Description content="This is my cool site"><meta property="og:title" content="Docker Basics"><meta property="og:description" content="This is my reference article to introduce docker basic concepts.
Agenda Overview Why and What? Why do you need docker? Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer. We want to use those services because we don&rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &mldr; name it (e.g nginx, haproxy, postgresql, redis, python, etc&mldr;).
IT architecture is a moving target full of people with strong opinions."><meta property="og:type" content="article"><meta property="og:url" content="https://rockwelln.github.io/posts/docker-basics/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-19T10:03:56+02:00"><meta property="article:modified_time" content="2022-05-19T10:03:56+02:00"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker Basics"><meta name=twitter:description content="This is my reference article to introduce docker basic concepts.
Agenda Overview Why and What? Why do you need docker? Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer. We want to use those services because we don&rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &mldr; name it (e.g nginx, haproxy, postgresql, redis, python, etc&mldr;).
IT architecture is a moving target full of people with strong opinions."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://rockwelln.github.io/posts/docker-basics/><link rel=next href=https://rockwelln.github.io/posts/openvpn-custom-routes/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Docker Basics","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/rockwelln.github.io\/posts\/docker-basics\/"},"genre":"posts","wordcount":490,"url":"https:\/\/rockwelln.github.io\/posts\/docker-basics\/","datePublished":"2022-05-19T10:03:56+02:00","dateModified":"2022-05-19T10:03:56+02:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Author"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=1337>My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=1337>My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Docker Basics</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Author</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-05-19>2022-05-19</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;490 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;3 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#agenda>Agenda</a></li><li><a href=#why-do-you-need-docker>Why do you need docker?</a><ul><li><a href=#typical-dependency-issue>Typical dependency issue</a></li><li><a href=#platform-deprecation>Platform deprecation</a></li><li><a href=#a-solution-attempt>A solution attempt</a></li></ul></li><li><a href=#living-in-a-limited-environment>Living in a limited environment</a><ul><li><a href=#reading-files>Reading files</a></li><li><a href=#patch-files>Patch files</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>This is my reference article to introduce docker basic concepts.</p><h2 id=agenda>Agenda</h2><ol><li>Overview<ol><li>Why and What?</li></ol></li></ol><h2 id=why-do-you-need-docker>Why do you need docker?</h2><p>Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.
We want to use those services because we don&rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &mldr; name it (e.g nginx, haproxy, postgresql, redis, python, etc&mldr;).</p><p>IT architecture is a moving target full of people with strong opinions. Each of these tools has it&rsquo;s own community and list of requirements and (even if the team behind them is making a great job to ensure compatibility) there is no guarantee they will work properly together across versions, in the long run.</p><h3 id=typical-dependency-issue>Typical dependency issue</h3><p>For some reason (customer&rsquo;s requirement or OS limitation), you have to use NGINX version A (which is old).
That version requires Openssl version X (which is old too).
So you need python version B which requires Openssl version Y.
This kind of conflict can be resolved with a lot of manual commands, difficult to explain to a new developper and difficult to maintain over time.</p><h3 id=platform-deprecation>Platform deprecation</h3><p>Back in time, 8 years ago, Centos was known to be the most stable linux distribution. So we decided to use it as base requirement for our software.
But today Centos is deprecated, only bug fixes and security patches are provided for Centos7 until June, 2024.
(it means, for instance, Centos7 still ships python3.6 which is EOL since 12/2021 without any bug fixes or security patches).</p><h3 id=a-solution-attempt>A solution attempt</h3><p>We, as software makers, don&rsquo;t want to deal with those recurring problems.
We want to have isolation of service dependencies and abstraction of the operating system.</p><p>Docker brings software isolation. It&rsquo;s not the only one (virtual machines) or the first to use containers (LXC, LXD, etc.)</p><h2 id=living-in-a-limited-environment>Living in a limited environment</h2><h3 id=reading-files>Reading files</h3><p>You can usually use <code>cat</code> for small files or <code>less</code> for bigger files</p><h3 id=patch-files>Patch files</h3><p>Sometimes we want to patch just a couple of files in a running container.
But because the container is light weight, usually there is no editor (e.g vi, vim or nano) present in the image.</p><h4 id=first-attempt-for-text-files-sed>First attempt for text files (sed)</h4><p>Sed is a very common program in the Linux world and is present in most distro and images (even the slim ones).
Usually scary for beginners using the command line, you can use it as such:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/&lt;old string&gt;/&lt;new string&gt;/g&#39;</span> &lt;text_file&gt; &gt; &lt;new_file&gt;
</span></span></code></pre></td></tr></table></div></div><p>For instance</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># replace the host ip address in some config file</span>
</span></span><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/host=127.0.0.1/host=1.2.3.4/g&#39;</span> config.yml &gt; newConfig.yml
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#75715e># check the modification applied only where you expect it</span>
</span></span><span style=display:flex><span>diff config.yml newConfig.yml
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#75715e># if you are fine with it, backup and replace the original</span>
</span></span><span style=display:flex><span>cp -v config.yml config.yml.bkp
</span></span><span style=display:flex><span>mv -v newConfig.yml config.yml
</span></span></code></pre></td></tr></table></div></div><h4 id=more-complex-situation>More complex situation</h4><p>When you need to patch a folder or binaries, <code>sed</code> will be no help.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-05-19</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://rockwelln.github.io/posts/docker-basics/ data-title="Docker Basics"><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://rockwelln.github.io/posts/docker-basics/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://rockwelln.github.io/posts/docker-basics/ data-title="Docker Basics"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://rockwelln.github.io/posts/docker-basics/ data-title="Docker Basics"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://rockwelln.github.io/posts/docker-basics/ data-title="Docker Basics"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/openvpn-custom-routes/ class=next rel=next title="Add custom routes to OpenVPN">Add custom routes to OpenVPN<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.116.1">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank></a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>