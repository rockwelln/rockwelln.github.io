<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This is my reference article to introduce docker basic concepts.
Agenda  Overview  Why and What?    Why do you need docker? Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.We want to use those services because we don&amp;rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &amp;hellip; name it (e.g nginx, haproxy, postgresql, redis, python, etc&amp;hellip;)."><title>Docker Basics</title><link rel=canonical href=https://rockwelln.github.io/posts/docker-basics/><link rel=stylesheet href=/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css><meta property="og:title" content="Docker Basics"><meta property="og:description" content="This is my reference article to introduce docker basic concepts.
Agenda  Overview  Why and What?    Why do you need docker? Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.We want to use those services because we don&amp;rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &amp;hellip; name it (e.g nginx, haproxy, postgresql, redis, python, etc&amp;hellip;)."><meta property="og:url" content="https://rockwelln.github.io/posts/docker-basics/"><meta property="og:site_name" content="1337"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:published_time" content="2022-05-19T10:03:56+02:00"><meta property="article:modified_time" content="2022-05-19T10:03:56+02:00"><meta name=twitter:title content="Docker Basics"><meta name=twitter:description content="This is my reference article to introduce docker basic concepts.
Agenda  Overview  Why and What?    Why do you need docker? Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.We want to use those services because we don&amp;rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &amp;hellip; name it (e.g nginx, haproxy, postgresql, redis, python, etc&amp;hellip;)."></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_huda2458f72ce188392d75c5d51cd8e24e_373_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>1337</a></h1><h2 class=site-description></h2></div></header><ol class=menu id=main-menu><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/posts/docker-basics/>Docker Basics</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>May 19, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>3 minute read</time></div></footer></div></header><section class=article-content><p>This is my reference article to introduce docker basic concepts.</p><h2 id=agenda>Agenda</h2><ol><li>Overview<ol><li>Why and What?</li></ol></li></ol><h2 id=why-do-you-need-docker>Why do you need docker?</h2><p>Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.
We want to use those services because we don&rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &mldr; name it (e.g nginx, haproxy, postgresql, redis, python, etc&mldr;).</p><p>IT architecture is a moving target full of people with strong opinions. Each of these tools has it&rsquo;s own list of requirements and (even if the team behind them is making a great job to ensure compatibility) there is no guarantee they will work properly together across versions, in the long run.</p><h3 id=typical-dependency-issue>Typical dependency issue</h3><p>For some reason (customer&rsquo;s requirement or OS limitation), you have to use NGINX version A (which is old).
That version requires Openssl version X (which is old too).
So you need python version B which requires Openssl version Y.
This kind of conflict can be resolved with a lot of manual commands, difficult to explain to a new developper and difficult to maintain over time.</p><h3 id=platform-deprecation>Platform deprecation</h3><p>Back in time, 8 years ago, Centos was known to be the most stable linux distribution. So we decided to use it as base requirement for our software.
But today Centos is deprecated, only bug fixes and security patches are provided for Centos7 until June, 2024.
(it means, for instance, Centos7 still ships python3.6 which is EOL since 12/2021 without any bug fixes or security patches).</p><h3 id=a-solution-attempt>A solution attempt</h3><p>We, as software makers, don&rsquo;t want to deal with those recurring problems.
We want to have isolation of service dependencies and abstraction of the operating system.</p><h2 id=living-in-a-limited-environment>Living in a limited environment</h2><h3 id=reading-files>Reading files</h3><p>You can usually use <code>cat</code> for small files or <code>less</code> for bigger files</p><h3 id=patch-files>Patch files</h3><p>Sometimes we want to patch just a couple of files in a running container.
But because the container is light weight, usually there is no editor (e.g vi, vim or nano) present in the image.</p><h4 id=first-attempt-for-text-files-sed>First attempt for text files (sed)</h4><p>Sed is a very common program in the Linux world and is present in most distro and images (even the slim ones).
Usually scary for beginners using the command line, you can use it as such:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/&lt;old string&gt;/&lt;new string&gt;/g&#39;</span> &lt;text_file&gt; &gt; &lt;new_file&gt;
</span></span></code></pre></div><p>For instance</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># replace the host ip address in some config file</span>
</span></span><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/host=127.0.0.1/host=1.2.3.4/g&#39;</span> config.yml &gt; newConfig.yml
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#75715e># check the modification applied only where you expect it</span>
</span></span><span style=display:flex><span>diff config.yml newConfig.yml
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e># if you are fine with it, backup and replace the original</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>cp -v config.yml config.yml.bkp
</span></span><span style=display:flex><span>mv -v newConfig.yml config.yml
</span></span></code></pre></div><h4 id=more-complex-situation>More complex situation</h4><p>When you need to patch a folder or binaries, <code>sed</code> will be no help.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">199
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">200
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">201
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">202
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">203
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">204
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">205
</span><span style=background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">206
</span></span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">207
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">208
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">209
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">210
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">211
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">212
</span><span style=background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">213
</span></span><span style=background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">214
</span></span><span style=background-color:#3c3d38><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">215
</span></span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">216
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">217
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">218
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// GetTitleFunc returns a func that can be used to transform a string to
</span></span></span><span style=display:flex><span><span style=color:#75715e>// title case.
</span></span></span><span style=display:flex><span><span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e>// The supported styles are
</span></span></span><span style=display:flex><span><span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e>// - &#34;Go&#34; (strings.Title)
</span></span></span><span style=display:flex><span><span style=color:#75715e>// - &#34;AP&#34; (see https://www.apstylebook.com/)
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// - &#34;Chicago&#34; (see https://www.chicagomanualofstyle.org/home.html)
</span></span></span><span style=display:flex><span><span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e>// If an unknown or empty style is provided, AP style is what you get.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>GetTitleFunc</span>(<span style=color:#a6e22e>style</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>s</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>ToLower</span>(<span style=color:#a6e22e>style</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;go&#34;</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Title</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;chicago&#34;</span>:
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>transform</span>.<span style=color:#a6e22e>NewTitleConverter</span>(<span style=color:#a6e22e>transform</span>.<span style=color:#a6e22e>ChicagoStyle</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>transform</span>.<span style=color:#a6e22e>NewTitleConverter</span>(<span style=color:#a6e22e>transform</span>.<span style=color:#a6e22e>APStyle</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer></footer></article><footer class=site-footer><section class=copyright>&copy;
2022 1337</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>