<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Docker Basics | 1337</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="This is my reference article to introduce docker basic concepts.
Agenda  Overview  Why and What?    Why do you need docker? Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.We want to use those services because we don&rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &mldr; name it (e.g nginx, haproxy, postgresql, redis, python, etc&mldr;)."><meta name=generator content="Hugo 0.99.1"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Docker Basics"><meta property="og:description" content="This is my reference article to introduce docker basic concepts.
Agenda  Overview  Why and What?    Why do you need docker? Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.We want to use those services because we don&rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &mldr; name it (e.g nginx, haproxy, postgresql, redis, python, etc&mldr;)."><meta property="og:type" content="article"><meta property="og:url" content="https://rockwelln.github.io/posts/docker-basics/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-19T10:03:56+02:00"><meta property="article:modified_time" content="2022-05-19T10:03:56+02:00"><meta itemprop=name content="Docker Basics"><meta itemprop=description content="This is my reference article to introduce docker basic concepts.
Agenda  Overview  Why and What?    Why do you need docker? Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.We want to use those services because we don&rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &mldr; name it (e.g nginx, haproxy, postgresql, redis, python, etc&mldr;)."><meta itemprop=datePublished content="2022-05-19T10:03:56+02:00"><meta itemprop=dateModified content="2022-05-19T10:03:56+02:00"><meta itemprop=wordCount content="444"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker Basics"><meta name=twitter:description content="This is my reference article to introduce docker basic concepts.
Agenda  Overview  Why and What?    Why do you need docker? Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.We want to use those services because we don&rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &mldr; name it (e.g nginx, haproxy, postgresql, redis, python, etc&mldr;)."></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">1337</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Docker Basics</h1><time class="f6 mv4 dib tracked" datetime=2022-05-19T10:03:56+02:00>May 19, 2022</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>This is my reference article to introduce docker basic concepts.</p><h2 id=agenda>Agenda</h2><ol><li>Overview<ol><li>Why and What?</li></ol></li></ol><h2 id=why-do-you-need-docker>Why do you need docker?</h2><p>Modern architectures usually involve existing services to handle some responsibilities in the service we want to offer.
We want to use those services because we don&rsquo;t have time to reinvent the wheel and they are robust, cheap/free, standard, &mldr; name it (e.g nginx, haproxy, postgresql, redis, python, etc&mldr;).</p><p>IT architecture is a moving target full of people with strong opinions. Each of these tools has it&rsquo;s own list of requirements and (even if the team behind them is making a great job to ensure compatibility) there is no guarantee they will work properly together across versions, in the long run.</p><h3 id=typical-dependency-issue>Typical dependency issue</h3><p>For some reason (customer&rsquo;s requirement or OS limitation), you have to use NGINX version A (which is old).
That version requires Openssl version X (which is old too).
So you need python version B which requires Openssl version Y.
This kind of conflict can be resolved with a lot of manual commands, difficult to explain to a new developper and difficult to maintain over time.</p><h3 id=platform-deprecation>Platform deprecation</h3><p>Back in time, 8 years ago, Centos was known to be the most stable linux distribution. So we decided to use it as base requirement for our software.
But today Centos is deprecated, only bug fixes and security patches are provided for Centos7 until June, 2024.
(it means, for instance, Centos7 still ships python3.6 which is EOL since 12/2021 without any bug fixes or security patches).</p><h3 id=a-solution-attempt>A solution attempt</h3><p>We, as software makers, don&rsquo;t want to deal with those recurring problems.
We want to have isolation of service dependencies and abstraction of the operating system.</p><h2 id=living-in-a-limited-environment>Living in a limited environment</h2><h3 id=reading-files>Reading files</h3><p>You can usually use <code>cat</code> for small files or <code>less</code> for bigger files</p><h3 id=patch-files>Patch files</h3><p>Sometimes we want to patch just a couple of files in a running container.
But because the container is light weight, usually there is no editor (e.g vi, vim or nano) present in the image.</p><h4 id=first-attempt-for-text-files-sed>First attempt for text files (sed)</h4><p>Sed is a very common program in the Linux world and is present in most distro and images (even the slim ones).
Usually scary for beginners using the command line, you can use it as such:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/&lt;old string&gt;/&lt;new string&gt;/g&#39;</span> &lt;text_file&gt; &gt; &lt;new_file&gt;
</span></span></code></pre></div><p>For instance</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># replace the host ip address in some config file</span>
</span></span><span style=display:flex><span>sed <span style=color:#e6db74>&#39;s/host=127.0.0.1/host=1.2.3.4/g&#39;</span> config.yml &gt; newConfig.yml
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#75715e># check the modification applied only where you expect it</span>
</span></span><span style=display:flex><span>diff config.yml newConfig.yml
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#75715e># if you are fine with it, backup and replace the original</span>
</span></span><span style=display:flex><span>cp -v config.yml config.yml.bkp
</span></span><span style=display:flex><span>mv -v newConfig.yml config.yml
</span></span></code></pre></div><h4 id=more-complex-situation>More complex situation</h4><p>When you need to patch a folder or binaries, <code>sed</code> will be no help.</p><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://rockwelln.github.io/>&copy; 1337 2022</a><div><div class=ananke-socials></div></div></div></footer></body></html>